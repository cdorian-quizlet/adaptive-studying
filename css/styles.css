/* Typography System - CSS Custom Properties */
:root {
    /* Font Family */
    --typography-fontFamily: "Hurme Geometric Sans 2";
    
    /* Header Sizes */
    --typography-size-header-one: 44px;
    --typography-size-header-two: 32px;
    --typography-size-header-three: 24px;
    --typography-size-header-four: 20px;
    --typography-size-header-five: 16px;
    
    /* Header Line Heights */
    --typography-lineHeight-header-one: 56px;
    --typography-lineHeight-header-two: 40px;
    --typography-lineHeight-header-three: 32px;
    --typography-lineHeight-header-four: 28px;
    --typography-lineHeight-header-five: 24px;
    
    /* Sub-header Sizes */
    --typography-size-subheading-one: 24px;
    --typography-size-subheading-two: 20px;
    --typography-size-subheading-three: 16px;
    --typography-size-subheading-four: 14px;
    --typography-size-subheading-five: 12px;
    
    /* Sub-header Line Heights */
    --typography-lineHeight-subheading-one: 36px;
    --typography-lineHeight-subheading-two: 28px;
    --typography-lineHeight-subheading-three: 24px;
    --typography-lineHeight-subheading-four: 20px;
    --typography-lineHeight-subheading-five: 16px;
    
    /* Body Sizes */
    --typography-size-body-one: 24px;
    --typography-size-body-two: 20px;
    --typography-size-body-three: 16px;
    --typography-size-body-four: 14px;
    --typography-size-body-five: 12px;
    
    /* Body Line Heights */
    --typography-lineHeight-body-one: 32px;
    --typography-lineHeight-body-two: 28px;
    --typography-lineHeight-body-three: 24px;
    --typography-lineHeight-body-four: 20px;
    --typography-lineHeight-body-five: 16px;
    
    /* Letter Spacing */
    --typography-letterSpacing-none: 0;
    
    /* === COLOR SYSTEM === */
    
    /* Reference Colors - Gray Scale */
    --color-gray-100: #FFFFFF;
    --color-gray-100-none: #FFFFFF00;
    --color-gray-200: #F6F7FB;
    --color-gray-300: #EDEFF4;
    --color-gray-400: #D9DDE8;
    --color-gray-500: #939BB4;
    --color-gray-600: #586380;
    --color-gray-700: #2E3856;
    --color-gray-800: #282E3E;
    --color-gray-900: #1A1D28;
    
    /* Reference Colors - Twilight (Primary Brand) */
    --color-twilight-100: #EDEFFF;
    --color-twilight-200: #DBDFFF;
    --color-twilight-300: #A8B1FF;
    --color-twilight-400: #7583FF;
    --color-twilight-500: #4255FF;
    --color-twilight-600: #423ED8;
    --color-twilight-700: #1F1C8B;
    --color-twilight-800: #14125C;
    --color-twilight-900: #0A092D;
    --color-twilight-900-none: #0A092D00;
    
    /* Reference Colors - Sunset */
    --color-sunset-100: #FFF9E3;
    --color-sunset-200: #FFEDAB;
    --color-sunset-300: #FFDC62;
    --color-sunset-400: #FFCD1F;
    --color-sunset-500: #997700;
    
    /* Reference Colors - Mint */
    --color-mint-100: #E6FCF4;
    --color-mint-200: #C7F7E6;
    --color-mint-300: #98F1D1;
    --color-mint-400: #59E8B5;
    --color-mint-500: #18AE79;
    --color-mint-600: #12815A;
    
    /* Reference Colors - Cherry */
    --color-cherry-300: #FF7873;
    --color-cherry-400: #DA4543;
    --color-cherry-500: #B00020;
    
    /* Reference Colors - Sherbert */
    --color-sherbert-100: #FFF6EF;
    --color-sherbert-200: #FFE8D8;
    --color-sherbert-300: #FFC38C;
    --color-sherbert-400: #FF983A;
    --color-sherbert-500: #CC4E00;
    
    /* Reference Colors - Sky Blue */
    --color-skyblue-100: #EAF9FF;
    --color-skyblue-200: #CBF1FF;
    --color-skyblue-300: #98E3FF;
    --color-skyblue-400: #51CFFF;
    --color-skyblue-500: #008EC4;
    
    /* Reference Colors - Lilac */
    --color-lilac-100: #FCF0FF;
    --color-lilac-200: #F7D9FF;
    --color-lilac-300: #EEAAFF;
    --color-lilac-400: #E372FF;
    --color-lilac-500: #9900BE;
    
    /* Reference Colors - Lemon */
    --color-lemon-100: #FDFFE9;
    --color-lemon-200: #FAFFBB;
    --color-lemon-300: #F5FF7D;
    --color-lemon-400: #EBFF03;
    --color-lemon-500: #D4E603;
    
    /* Reference Colors - Rosewater */
    --color-rosewater: #FDD2CA;
    
    /* Reference Colors - Special */
    --color-scrim-100: #0A092D14;
    --color-scrim-200: #2E385680;
    --color-scrim-300: #0101108F;
    --color-other-none: #00000000;
    --color-other-shadow: #282E3E1A;
    
    /* === SYSTEM SEMANTIC COLORS (Light Mode) === */
    
    /* Text Colors */
    --sys-text-primary: var(--color-gray-800);
    --sys-text-secondary: var(--color-gray-600);
    --sys-text-inverse: var(--color-gray-200);
    --sys-text-highlight: var(--color-twilight-500);
    
    /* Status Text Colors */
    --sys-text-success: var(--color-mint-600);
    --sys-text-warning: var(--color-sherbert-500);
    --sys-text-error: var(--color-cherry-500);
    
    /* Surface Colors */
    --sys-surface-base: var(--color-gray-100);
    --sys-surface-base-none: var(--color-gray-100-none);
    --sys-surface-raised: var(--color-gray-100);
    --sys-surface-inverse: var(--color-gray-900);
    --sys-surface-upgrade: var(--color-sunset-400);
    
    /* Background Colors */
    --sys-background: var(--color-gray-200);
    --sys-card: var(--color-gray-100);
    --sys-overlay-primary: var(--color-scrim-300);
    
    /* Border Colors */
    --sys-border-primary: var(--color-gray-300);
    --sys-border-transparent: var(--color-gray-100-none);
    --sys-border-success: var(--color-mint-600);
    --sys-border-warning: var(--color-sherbert-400);
    --sys-border-error: var(--color-cherry-500);

    /* Shared Input Tokens */
    --shared-input-border-focus: var(--color-twilight-300);
  --shared-input-text-disabled: var(--color-gray-500);
  --shared-input-bg-default: var(--color-gray-200);
    
    /* Interactive Background Colors */
    --sys-interactive-bg-primary-default: var(--color-twilight-500);
    --sys-interactive-bg-primary-hover: var(--color-twilight-600);
    --sys-interactive-bg-primary-focus: var(--color-twilight-500);
    --sys-interactive-bg-primary-press: var(--color-twilight-700);
    --sys-interactive-bg-primary-disabled: var(--color-gray-400);
    
    --sys-interactive-bg-secondary-default: var(--color-twilight-100);
    --sys-interactive-bg-secondary-hover: var(--color-twilight-200);
    --sys-interactive-bg-secondary-focus: var(--color-twilight-100);
    --sys-interactive-bg-secondary-press: var(--color-twilight-300);
    --sys-interactive-bg-secondary-disabled: var(--color-gray-400);
    --sys-interactive-bg-secondary-selected: var(--color-twilight-100);
    
    /* Status Colors */
    --sys-success: var(--color-mint-600);
    --sys-error: var(--color-cherry-500);
    --sys-warning: var(--color-sherbert-500);
    --sys-disabled: var(--color-gray-400);
    --sys-highlight: var(--color-twilight-300);
    --sys-upgrade: var(--color-sunset-400);
    
    /* === SPACING SYSTEM === */
    --spacing-none: 0px;
    --spacing-xxsmall: 4px;
    --spacing-xsmall: 8px;
    --spacing-small: 16px;
    --spacing-medium: 24px;
    --spacing-large: 32px;
    --spacing-xlarge: 48px;
    --spacing-xxlarge: 64px;
    
    /* Exception Spacing */
    --spacing-2: 2px;
    --spacing-6: 6px;
    --spacing-10: 10px;
    --spacing-12: 12px;
    --spacing-20: 20px;
    
    /* === RADIUS SYSTEM === */
    --radius-none: 0px;
    --radius-small: 4px;
    --radius-medium: 8px;
    --radius-large: 16px;
    --radius-xlarge: 24px;
    --radius-full: 200px;
    
    /* === SIZE SYSTEM === */
    --size-none: 0px;
    --size-small: 16px;
    --size-medium: 24px;
    --size-large: 32px;
    --size-xlarge: 48px;
    --size-xxlarge: 64px;
    --size-xxxlarge: 88px;
    
    /* === STROKE SYSTEM === */
    --stroke-thin: 1px;
    --stroke-regular: 2px;
    
    /* === SHADOW SYSTEM === */
    --shadow-spread-none: 0px;
    --shadow-offset-none: 0px;
    --shadow-offset-small: 2px;
    --shadow-offset-medium: 4px;
    --shadow-offset-large: 8px;
    --shadow-offset-xlarge: 20px;
    --shadow-blur-small: 4px;
    --shadow-blur-medium: 16px;
    --shadow-blur-large: 32px;
    --shadow-blur-xlarge: 40px;
    
    /* Shadow Presets */
    --shadow-small: var(--shadow-offset-none, 0) var(--shadow-offset-small, 2px) var(--shadow-blur-small, 4px) var(--shadow-spread-none, 0) var(--color-other-shadow, rgba(40, 46, 62, 0.10));
    --shadow-medium: var(--shadow-offset-none, 0) var(--shadow-offset-medium, 4px) var(--shadow-blur-medium, 16px) var(--shadow-spread-none, 0) var(--color-other-shadow, rgba(40, 46, 62, 0.10));
    --shadow-large: var(--shadow-offset-none, 0) var(--shadow-offset-medium, 4px) var(--shadow-blur-large, 32px) var(--shadow-spread-none, 0) var(--color-other-shadow, rgba(40, 46, 62, 0.10));
    --shadow-xlarge: var(--shadow-offset-none, 0) var(--shadow-offset-none, 0) var(--shadow-blur-large, 32px) var(--shadow-spread-none, 0) var(--color-other-shadow, rgba(40, 46, 62, 0.10));
    
    /* Additional Presets */
    --shadow-card: var(--shadow-medium);
    --shadow-elevated: var(--shadow-large);
    --shadow-modal: 0 20px 40px rgba(0, 0, 0, 0.15);
    --shadow-interactive: 0 4px 16px rgba(66, 85, 255, 0.20);
    --shadow-interactive-hover: 0 8px 24px rgba(66, 85, 255, 0.25);
    
    /* === ANIMATION SYSTEM === */
    --anim-ease-enter: cubic-bezier(0.30, 0.00, 0.44, 1.00);
    --anim-ease-enter-spring: cubic-bezier(0.35, 1.40, 0.25, 1.00);
    --anim-ease-exit: cubic-bezier(0.49, 0.00, 0.68, 1.00);
    --anim-ease-exit-spring: cubic-bezier(0.40, 0.00, 0.60, -0.40);
    --anim-ease-persist: cubic-bezier(0.37, 0.00, 0.53, 1.00);
    --anim-ease-persist-spring: cubic-bezier(0.35, 1.40, 0.25, 1.00);
    --anim-ease-fade: cubic-bezier(0.35, 0.00, 0.50, 1.00);
}

/* Typography Utility Classes */
.header-1 {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-header-one);
    font-style: normal;
    font-weight: 700;
    line-height: var(--typography-lineHeight-header-one);
    letter-spacing: var(--typography-letterSpacing-none);
}

.header-2 {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-header-two);
    font-style: normal;
    font-weight: 700;
    line-height: var(--typography-lineHeight-header-two);
    letter-spacing: var(--typography-letterSpacing-none);
}

.header-3 {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-header-three);
    font-style: normal;
    font-weight: 700;
    line-height: var(--typography-lineHeight-header-three);
    letter-spacing: var(--typography-letterSpacing-none);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.header-4 {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-header-four);
    font-style: normal;
    font-weight: 700;
    line-height: var(--typography-lineHeight-header-four);
    letter-spacing: var(--typography-letterSpacing-none);
}

.header-5 {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-header-five);
    font-style: normal;
    font-weight: 700;
    line-height: var(--typography-lineHeight-header-five);
    letter-spacing: var(--typography-letterSpacing-none);
}

.subheading-1 {
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-subheading-one);
    font-style: normal;
    font-weight: 600;
    line-height: var(--typography-lineHeight-subheading-one);
    letter-spacing: var(--typography-letterSpacing-none);
}

.subheading-2 {
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-subheading-two);
    font-style: normal;
    font-weight: 600;
    line-height: var(--typography-lineHeight-subheading-two);
    letter-spacing: var(--typography-letterSpacing-none);
}

.subheading-3 {
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-subheading-three);
    font-style: normal;
    font-weight: 600;
    line-height: var(--typography-lineHeight-subheading-three);
    letter-spacing: var(--typography-letterSpacing-none);
}

.subheading-4 {
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-subheading-four);
    font-style: normal;
    font-weight: 600;
    line-height: var(--typography-lineHeight-subheading-four);
    letter-spacing: var(--typography-letterSpacing-none);
}

.subheading-5 {
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-subheading-five);
    font-style: normal;
    font-weight: 600;
    line-height: var(--typography-lineHeight-subheading-five);
    letter-spacing: var(--typography-letterSpacing-none);
}

.body-1 {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-body-one);
    font-style: normal;
    font-weight: 400;
    line-height: var(--typography-lineHeight-body-one);
    letter-spacing: var(--typography-letterSpacing-none);
}

.body-2 {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-body-two);
    font-style: normal;
    font-weight: 400;
    line-height: var(--typography-lineHeight-body-two);
    letter-spacing: var(--typography-letterSpacing-none);
}

.body-3 {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-body-three);
    font-style: normal;
    font-weight: 400;
    line-height: var(--typography-lineHeight-body-three);
    letter-spacing: var(--typography-letterSpacing-none);
}

.body-4 {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-body-four);
    font-style: normal;
    font-weight: 400;
    line-height: var(--typography-lineHeight-body-four);
    letter-spacing: var(--typography-letterSpacing-none);
}

.body-5 {
    font-feature-settings: 'liga' off, 'clig' off;
    font-family: var(--typography-fontFamily);
    font-size: var(--typography-size-body-five);
    font-style: normal;
    font-weight: 400;
    line-height: var(--typography-lineHeight-body-five);
    letter-spacing: var(--typography-letterSpacing-none);
}

/* Color Utility Classes */
.text-primary { color: var(--sys-text-primary); }
.text-secondary { color: var(--sys-text-secondary); }
.text-inverse { color: var(--sys-text-inverse); }
.text-highlight { color: var(--sys-text-highlight); }
.text-success { color: var(--sys-text-success); }
.text-warning { color: var(--sys-text-warning); }
.text-error { color: var(--sys-text-error); }

.bg-primary { background-color: var(--sys-interactive-bg-primary-default); }
.bg-secondary { background-color: var(--sys-interactive-bg-secondary-default); }
.bg-surface { background-color: var(--sys-surface-base); }
.bg-card { background-color: var(--sys-card); }
.bg-background { background-color: var(--sys-background); }

.border-primary { border-color: var(--sys-border-primary); }
.border-success { border-color: var(--sys-border-success); }
.border-warning { border-color: var(--sys-border-warning); }
.border-error { border-color: var(--sys-border-error); }

/* Shadow Utility Classes */
.shadow-none { 
    box-shadow: none; 
}

.shadow-small { 
    box-shadow: var(--shadow-small);
}

.shadow-medium { 
    box-shadow: var(--shadow-medium);
}

.shadow-large { 
    box-shadow: var(--shadow-large);
}

.shadow-xlarge { 
    box-shadow: var(--shadow-xlarge);
}

.shadow-card { 
    box-shadow: var(--shadow-card);
}

.shadow-elevated { 
    box-shadow: var(--shadow-elevated);
}

.shadow-modal { 
    box-shadow: var(--shadow-modal);
}

.shadow-interactive { 
    box-shadow: var(--shadow-interactive);
}

/* Removed non-system inset shadow utility */

/* Interactive Shadow States */
.shadow-hover:hover {
    box-shadow: var(--shadow-large);
    transition: box-shadow 0.2s var(--anim-ease-enter);
}

.shadow-card-hover:hover {
    box-shadow: var(--shadow-large);
    transition: box-shadow 0.2s var(--anim-ease-enter);
}

.shadow-small-hover:hover {
    box-shadow: var(--shadow-medium);
    transition: box-shadow 0.2s var(--anim-ease-enter);
}

.shadow-medium-hover:hover {
    box-shadow: var(--shadow-large);
    transition: box-shadow 0.2s var(--anim-ease-enter);
}

.shadow-large-hover:hover {
    box-shadow: var(--shadow-xlarge);
    transition: box-shadow 0.2s var(--anim-ease-enter);
}

.shadow-interactive-hover:hover {
    box-shadow: var(--shadow-interactive-hover);
    transition: box-shadow 0.2s var(--anim-ease-enter);
}

.shadow-focus:focus {
    box-shadow: var(--shadow-interactive);
    transition: box-shadow 0.2s var(--anim-ease-enter);
}

/* Custom Font Definitions */
@font-face {
    font-family: 'Hurme Geometric Sans 2';
    src: url('../fonts/HurmeGeometricSans2-Regular.otf') format('opentype');
    font-weight: 400;
    font-style: normal;
}

@font-face {
    font-family: 'Hurme Geometric Sans 2';
    src: url('../fonts/HurmeGeometricSans2-Italic.otf') format('opentype');
    font-weight: 400;
    font-style: italic;
}

@font-face {
    font-family: 'Hurme Geometric Sans 2';
    src: url('../fonts/HurmeGeometricSans2-SemiBold.otf') format('opentype');
    font-weight: 600;
    font-style: normal;
}

@font-face {
    font-family: 'Hurme Geometric Sans 2';
    src: url('../fonts/HurmeGeometricSans2-SemiBoldItalic.otf') format('opentype');
    font-weight: 600;
    font-style: italic;
}

@font-face {
    font-family: 'Hurme Geometric Sans 2';
    src: url('../fonts/HurmeGeometricSans2-Bold.otf') format('opentype');
    font-weight: 700;
    font-style: normal;
}

@font-face {
    font-family: 'Hurme Geometric Sans 2';
    src: url('../fonts/HurmeGeometricSans2-BoldItalic.otf') format('opentype');
    font-weight: 700;
    font-style: italic;
}

/* Reset and Base Styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    width: 100%;
    margin: 0;
    padding: 0;
}

body {
    font-family: 'Hurme Geometric Sans 2', 'Montserrat', 'Figtree', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
    background: var(--sys-surface-base);
    color: var(--sys-text-primary);
    line-height: 1.6;
    font-weight: 600;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    min-height: 100vh;
    transition: opacity .25s ease;
}

.page-fade-out {
    opacity: 0;
}

.app-container {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    max-width: 480px;
    width: 100%;
    margin: 0 auto;
    position: relative;
    overflow: visible;
}

.home .app-container::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--sys-surface-base) url('../images/home-gradient.png') no-repeat -82px -500px;
    background-size: 676px 1040px;
    width: calc(100% + 164px);
    margin-left: -82px;
    z-index: -1;
}

/* Status Bar */
.status-bar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 12px 20px 8px;
    color: var(--color-gray-900);
    font-size: 14px;
    font-weight: 600;
}

.status-icons {
    display: flex;
    gap: 6px;
    align-items: center;
}

.status-icons .material-icons-round {
    font-size: 32px;
}

/* Search Section */
.search-section {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 48px 20px 48px;
}

/* Responsive padding for smaller screens */
@media (max-width: 400px) {
    .search-section,
    .help-section,
    .jump-back-section,
    .studying-new-section,
    .recents-section {
        padding-left: 16px;
        padding-right: 16px;
    }
    
    .section-title {
        padding-left: 16px;
        padding-right: 16px;
    }
    
    .floating-bottom-bar {
        padding-left: 16px;
        padding-right: 16px;
    }
}

@media (max-width: 360px) {
    .search-section,
    .help-section,
    .jump-back-section,
    .studying-new-section,
    .recents-section {
        padding-left: 12px;
        padding-right: 12px;
    }
    
    .section-title {
        padding-left: 12px;
        padding-right: 12px;
    }
    
    .floating-bottom-bar {
        padding-left: 12px;
        padding-right: 12px;
    }
}

/* Help Section (first-time state) */
.help-section {
    padding: 0 20px 48px;
}

.help-card {
    background: white;
    border-radius: 20px;
    padding: 24px;
    box-shadow: var(--shadow-card);
    position: relative;
}

/* Variant: when a progress card is present, present help as a simple section like Studying something new */
.help-section.as-section .help-card {
    background: transparent;
    border-radius: 0;
    padding: 0;
    box-shadow: none;
}

.help-card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0;
}

.help-left {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    gap: 8px; /* 8px between sparkle and heading */
}

/* In section variant, align like a header row */
.help-section.as-section .help-left {
    flex-direction: row;
    align-items: center;
    gap: 8px;
}

.help-sparkle {
    font-size: 24px;
    color: currentColor; /* inherit from surrounding text */
}

.help-sparkle-img {
    width: 32px;
    height: 32px;
    display: inline-block;
}

.help-title {
    font-size: 20px;
    line-height: 1.2;
    color: var(--sys-text-primary);
    font-weight: 600;
}

/* Match section-title sizing when inline as a section */
.help-section.as-section .help-title {
    font-size: 18px;
    color: var(--sys-text-primary);
}

.search-bar {
    flex: 1;
    position: relative;
    background: rgba(255, 255, 255, 0.8);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 1px solid var(--sys-border-primary);
    border-radius: 24px;
    padding: 0 16px;
    height: 48px;
    display: flex;
    align-items: center;
}

.search-icon {
    width: 24px;
    height: 24px;
    margin-right: 8px;
}

.search-input {
    border: none;
    outline: none;
    background: transparent;
    font-size: 16px;
    color: var(--sys-text-secondary);
    width: 100%;
    height: 100%;
}

.search-input::placeholder {
    color: var(--sys-text-secondary);
}

.profile-avatar {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: var(--color-skyblue-100);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
}

.avatar-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
}

/* Section Titles */
.section-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--sys-text-primary);
    margin-bottom: 16px;
    padding: 0 20px;
}

/* Align section headings with the inner content of the progress card (20px container + 20px card padding) */
.studying-new-section .section-title {
    padding-left: 0;
}

/* Remove all left padding for the Jump back in header */
.jump-back-section .section-title {
    padding-left: 0;
}

/* Jump Back In Section */
.jump-back-section {
    padding: 0 20px 48px;
}

.jump-back-card {
    background: white;
    border-radius: 16px;
    padding: 20px;
    box-shadow: var(--shadow-card);
    margin-bottom: 8px;
}

.card-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 16px;
}

.card-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--sys-text-primary);
    flex: 1;
}

.more-options {
    background: none;
    border: none;
    color: var(--sys-text-secondary);
    padding: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 16px;
    right: 12px;
}

.more-options .material-icons-round {
    font-size: 24px;
}

.progress-container {
    margin-bottom: 20px;
}

.progress-bar {
    width: 100%;
    height: 16px;
    background: var(--color-mint-100);
    border-radius: 20px;
    overflow: hidden;
    margin-bottom: 8px;
}

/* Only apply to standard progress bars, not study plan step progress */
.progress-bar .progress-fill {
    height: 100%;
    background: var(--color-mint-500);
    border-radius: 20px;
    transition: width 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    min-width: 24px; /* Minimum visible size for 0% state */
}

/* 0% state styling - gray colors */
.progress-bar.zero-state {
    background: var(--color-gray-200);
}

/* Only apply zero-state styling to standard progress bars */
.progress-bar.zero-state .progress-fill {
    background: var(--color-gray-500);
    width: 24px !important; /* Force minimum width for 0% state */
}

/* Progress text highlighting animation */
.progress-text.highlighting {
    animation: pulseHighlight 0.6s ease-in-out;
}

@keyframes pulseHighlight {
    0% {
        transform: scale(1);
        color: var(--sys-text-secondary);
    }
    50% {
        transform: scale(1.05);
        color: var(--color-mint-500);
    }
    100% {
        transform: scale(1.05);
        color: var(--color-mint-500);
    }
}

.progress-text {
    font-size: 14px;
    color: var(--sys-text-secondary);
    font-weight: 600;
}

.continue-button {
    width: 100%;
    background: var(--sys-interactive-bg-primary-default);
    color: white;
    border: none;
    padding: 16px;
    border-radius: var(--radius-full);
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
    position: relative;
    overflow: hidden;
}

.continue-button::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(
        90deg,
        transparent 0%,
        transparent 15%,
        rgba(255, 255, 255, 0.2) 50%,
        transparent 85%,
        transparent 100%
    );
    transform: skewX(-20deg);
    animation: continueButtonShimmer 5s infinite 1.5s;
    pointer-events: none;
    z-index: 1;
}

@keyframes continueButtonShimmer {
    0% {
        left: -100%;
    }
    40% {
        left: 100%;
    }
    100% {
        left: 100%;
    }
}

.continue-button:hover {
    background: var(--sys-interactive-bg-primary-hover);
    transform: translateY(-1px);
}

.continue-button:active {
    transform: translateY(0);
}

/* Continue button loading state */
.continue-button.loading {
    border: none !important;
    outline: none !important;
    box-shadow: none !important;
    pointer-events: none;
    cursor: default;
    transform: translateY(0) !important; /* Reset any hover transforms */
}

.continue-button.loading .button-text {
    visibility: hidden;
}

.continue-button.loading .button-spinner {
    display: flex;
    align-items: center;
    justify-content: center;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    width: 100%;
    height: 100%;
}

.continue-button .button-text {
    display: block;
    position: relative;
    z-index: 2;
}

.continue-button .button-spinner {
    display: none;
    width: 24px;
    height: 24px;
}

/* Small Material Design spinner for continue button */
.button-spinner .material-spinner-small {
    animation: materialSpinnerRotate 2s linear infinite;
    width: 24px;
    height: 24px;
}

.button-spinner .spinner-path-small {
    animation: materialSpinnerDash 1.4s ease-in-out infinite;
}

/* Material Design spinner animations (reused from plan-flow) */
@keyframes materialSpinnerRotate {
    0% {
        transform: rotate(0deg);
    }
    100% {
        transform: rotate(360deg);
    }
}

@keyframes materialSpinnerDash {
    0% {
        stroke-dasharray: 1, 75;
        stroke-dashoffset: 0;
    }
    50% {
        stroke-dasharray: 55, 75;
        stroke-dashoffset: -20;
    }
    100% {
        stroke-dasharray: 1, 75;
        stroke-dashoffset: -74;
    }
}

/* Studying Something New Section */
.studying-new-section {
    padding: 0 20px 48px;
}

.studying-options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-top: 16px;
}

/* (Removed left nudge so the header can sit flush like Jump back in) */

.study-option {
    background: var(--sys-interactive-bg-secondary-default);
    border: none;
    border-radius: var(--radius-full, 200px);
    padding: 10px 16px; /* Default to 10px top/bottom for consistency */
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: center;
    font-size: 14px; /* Consistent font size */
    font-weight: 600;
    color: var(--color-twilight-500);
    line-height: 1.2;
    box-sizing: border-box;
}

/* Help card button padding override */
.help-card .study-option {
    padding: 10px 16px !important; /* Ensure 10px top/bottom padding */
    font-size: 14px !important;
    font-weight: 600;
    line-height: 1.2 !important; /* Override typography classes */
    box-sizing: border-box; /* Ensure padding is included in sizing */
}

/* Override typography classes when applied to study option buttons */
.help-card .study-option.subheading-4,
.help-card .study-option .subheading-4,
.study-option.subheading-4,
.study-option .subheading-4 {
    line-height: 1.2 !important;
    font-size: 14px !important;
}

/* Ensure consistent styling for all subheading classes on study options */
.help-card .study-option.subheading-1,
.help-card .study-option.subheading-2,
.help-card .study-option.subheading-3,
.help-card .study-option.subheading-5,
.study-option.subheading-1,
.study-option.subheading-2,
.study-option.subheading-3,
.study-option.subheading-5 {
    line-height: 1.2 !important;
    font-size: 14px !important;
}

/* Help card: style the first option as primary */
.help-card .studying-options .study-option:first-child {
    background: var(--sys-interactive-bg-primary-default);
    color: var(--sys-surface-base);
    padding: 10px 16px !important; /* Ensure consistent padding for study plan button */
    line-height: 1.2 !important; /* Override typography classes */
    font-size: 14px !important;
}

/* Ensure the span inside the first button also follows the same styling */
.help-card .studying-options .study-option:first-child .subheading-4 {
    line-height: 1.2 !important;
    font-size: 14px !important;
}

/* Help card: make options hug text (chips) rather than fill columns */
.help-card .studying-options {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-top: 24px; /* 24px between heading and buttons */
}

/* Grid like Studying something new when inline */
.help-section.as-section .studying-options {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
}

.help-card .study-option {
    flex: 0 0 auto; /* do not stretch */
    width: auto;
}

/* Buttons revert to larger size when inline section */
.help-section.as-section .study-option {
    padding: 10px 16px; /* 10px top/bottom, 16px left/right */
    font-size: 14px;
}

/* Specific styling for Study plan button in inline section */
.help-section.as-section .study-option.plan {
    background: var(--sys-interactive-bg-secondary-default);
    color: var(--color-twilight-500);
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

.help-section.as-section .study-option .btn-sparkle {
    width: 16px;
    height: 16px;
    display: inline-block;
}

/* Pre-onboarding: hide sparkle icon inside the Study plan button */
.help-section:not(.as-section) .study-option.plan .btn-sparkle {
    display: none;
}

.study-option:hover {
    background: var(--sys-interactive-bg-secondary-hover);
    transform: translateY(-1px);
}

/* Recents Section */
.recents-section {
    padding: 0 20px 48px;
    flex: 1;
}

/* Align Recents header flush like other sections */
.recents-section .section-title {
    padding-left: 0;
    margin-bottom: 8px;
}

.recents-list {
    display: flex;
    flex-direction: column;
    gap: 0;
}

.recent-item {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px;
    background: white;
    border-radius: 12px;
    transition: all 0.2s ease;
    cursor: pointer;
}

/* Remove left padding so thumbnails align with the section edge */
.recents-section .recent-item {
    /* Keep content (thumbnail) flush with the Recents heading */
    padding-left: 0;
    transition: margin 0.2s ease, padding 0.2s ease, background 0.2s ease, transform 0.2s ease;
}

/* On hover/focus, expand the card background further left without shifting content */
.recents-section .recent-item:hover,
.recents-section .recent-item:focus,
.recents-section .recent-item:focus-visible {
    margin-left: -8px;   /* extend background to the left */
    padding-left: 8px;   /* keep thumbnail aligned with heading */
}

.recent-item:hover {
    transform: translateY(-1px);
    background: var(--color-gray-200);
}

.item-icon {
    width: 48px;
    height: 48px;
    background: var(--color-skyblue-100);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    overflow: hidden;
}

.thumbnail-image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 8px;
}

.item-info {
    flex: 1;
    min-width: 0;
}

.item-title {
    font-size: 16px;
    font-weight: 600;
    color: var(--sys-text-primary);
    margin-bottom: 2px;
    line-height: 1.3;
}

.item-subtitle {
    font-size: 14px;
    color: var(--sys-text-secondary);
    font-weight: 600;
}

.placeholder-item {
    height: 80px;
    background: var(--color-gray-200);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.placeholder-content {
    width: 60%;
    height: 20px;
    background: var(--color-gray-400);
    border-radius: 10px;
}

/* Bottom Navigation */
.bottom-nav {
    display: flex;
    background: var(--sys-surface-base);
    border-top: 1px solid var(--sys-border-primary);
    border-radius: 20px 20px 0 0;
    padding: 12px 0 32px;
    box-shadow: var(--shadow-small);
}

.nav-item {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 4px;
    padding: 8px 4px;
    cursor: pointer;
    transition: all 0.2s ease;
    color: var(--sys-text-secondary);
    font-size: 12px;
    font-weight: 600;
}

.nav-item.active {
    color: var(--color-twilight-500);
}

.nav-item.active .material-icons-round,
.nav-item.active .material-symbols-rounded {
    color: var(--color-twilight-500);
}

.nav-item .material-icons-round,
.nav-item .material-symbols-rounded {
    font-size: 32px;
    margin-bottom: 2px;
    font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
    color: var(--sys-text-secondary);
}

.q-plus-icon {
    width: 32px;
    height: 32px;
    margin-bottom: 2px;
    filter: brightness(0) saturate(100%) invert(35%) sepia(0%) saturate(0%) hue-rotate(0deg) brightness(0.6) contrast(100%);
    transition: filter 0.2s ease;
}

.nav-item.active .q-plus-icon {
    filter: brightness(0) saturate(100%) invert(35%) sepia(79%) saturate(2476%) hue-rotate(202deg) brightness(118%) contrast(119%);
}

.nav-item:hover {
    transform: translateY(-1px);
}

/* Bottom Sheet */
.bottom-sheet {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: var(--sys-overlay-primary); /* design system overlay */
    display: flex;
    align-items: flex-end; /* container covers screen */
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    z-index: 1000;
}

.bottom-sheet.show { opacity: 1; pointer-events: auto; }

.bottom-sheet-content {
    position: fixed;
    left: 0; right: 0; bottom: 0;
    padding: 24px 20px;
    background: var(--sys-surface-base);
    border-radius: 20px 20px 0 0;
    box-shadow: var(--shadow-modal);
    max-height: 80vh;
    width: 100%;
    overflow: hidden;
    transform: translateY(100%);
    transition: transform 0.3s ease;
    display: flex;
    flex-direction: column;
}

.bottom-sheet.show .bottom-sheet-content { transform: translateY(0); }

.bottom-sheet-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 24px;
    padding-bottom: 16px;
    border-bottom: 1px solid var(--sys-border-primary);
    flex-shrink: 0;
}

.bottom-sheet-header h3 {
    font-size: 18px;
    font-weight: 600;
    color: var(--sys-text-primary);
    margin: 0;
}

.close-bottom-sheet {
    background: none;
    border: none;
    color: var(--sys-text-secondary);
    font-size: 20px;
    padding: 8px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.2s ease;
    display: flex;
    align-items: center;
    justify-content: center;
}

.close-bottom-sheet:hover {
    background: rgba(88, 99, 128, 0.1);
}

.bottom-sheet-actions {
    display: flex;
    flex-direction: column;
    gap: 24px;
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding-right: 4px; /* Account for scrollbar */
}

/* Custom scrollbar styling for bottom sheet */
.bottom-sheet-actions::-webkit-scrollbar {
    width: 6px;
}

.bottom-sheet-actions::-webkit-scrollbar-track {
    background: var(--color-gray-100);
    border-radius: 3px;
}

.bottom-sheet-actions::-webkit-scrollbar-thumb {
    background: var(--color-gray-400);
    border-radius: 3px;
}

.bottom-sheet-actions::-webkit-scrollbar-thumb:hover {
    background: var(--color-gray-500);
}

.action-button {
    display: flex;
    align-items: center;
    gap: 12px;
    background: var(--sys-card);
    border: 1px solid var(--sys-border-primary);
    border-radius: 12px;
    padding: 16px 20px;
    font-size: 16px;
    font-weight: 600;
    color: var(--sys-text-primary);
    cursor: pointer;
    transition: all 0.2s ease;
    text-align: left;
    width: 100%;
}

.action-button:hover {
    background: var(--color-gray-200);
    border-color: var(--sys-border-primary);
}

.action-button .material-icons-round {
    font-size: 20px;
    color: var(--sys-text-secondary);
}

/* Responsive Design */
@media (min-width: 768px) {
    .app-container {
        max-width: 520px;
    }
}

@media (min-width: 1024px) {
    .app-container {
        max-width: 560px;
    }
}

/* Focus states for accessibility */
.continue-button:focus,
.recent-item:focus,
.nav-item:focus {
    outline: 2px solid var(--color-twilight-500);
    outline-offset: 2px;
}

.search-input:focus {
    outline: none;
}

.search-bar:has(.search-input:focus) {
    border: 1px solid var(--shared-input-border-focus);
}

/* Animation for page load */
.jump-back-card,
.recent-item {
    animation: fadeInUp 0.6s ease-out forwards;
    opacity: 0;
    transform: translateY(20px);
}

.jump-back-card {
    animation-delay: 0.1s;
}

.recent-item:nth-child(1) { animation-delay: 0.2s; }
.recent-item:nth-child(2) { animation-delay: 0.3s; }
.placeholder-item { animation-delay: 0.4s; }

@keyframes fadeInUp {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}



/* Design System Input Component */
.ds-input {
    display: flex;
    width: 343px;
    min-width: 176px;
    flex-direction: column;
    align-items: center;
    gap: var(--spacing-xxsmall, 4px);
}

.ds-input__label {
    align-self: flex-start;
    font-size: 12px;
    font-weight: 600;
    color: var(--sys-text-secondary);
}

.ds-input__control {
    display: flex;
    align-items: center;
    width: 100%;
    min-height: 48px;
    padding: 10px var(--spacing-small, 16px);
    border: 1px solid var(--sys-border-primary);
    border-radius: 12px;
    background: var(--sys-surface-base);
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

.ds-input__start,
.ds-input__end {
    display: inline-flex;
    align-items: center;
    color: var(--sys-text-secondary);
}

.ds-input__start { margin-right: var(--spacing-small, 16px); }
.ds-input__end { margin-left: var(--spacing-small, 16px); }

.ds-input__field {
    flex: 1;
    border: none;
    outline: none;
    background: transparent;
    color: var(--sys-text-primary);
    font-size: 16px;
}

.ds-input__field::placeholder {
    color: var(--sys-text-secondary);
}

/* Focus state */
.ds-input:has(.ds-input__field:focus) .ds-input__control {
    border-color: var(--color-twilight-500);
    box-shadow: var(--shadow-small);
}

/* Filled state */
.ds-input:has(.ds-input__field:not(:placeholder-shown)) .ds-input__control {
    border-color: var(--sys-border-primary);
}

/* Disabled state */
.ds-input.is-disabled .ds-input__control,
.ds-input__field:disabled ~ .ds-input__end,
.ds-input__field:disabled {
    cursor: not-allowed;
}

.ds-input.is-disabled .ds-input__control,
.ds-input__field:disabled {
    background: var(--sys-surface-base);
    border-color: var(--sys-disabled);
    color: var(--sys-disabled);
    opacity: 0.6;
}

/* Inverse (dark) variant */
.ds-input--inverse .ds-input__control {
    background: var(--sys-surface-inverse);
    color: var(--sys-text-inverse);
    border-color: var(--sys-border-transparent);
}

.ds-input--inverse .ds-input__field::placeholder,
.ds-input--inverse .ds-input__start,
.ds-input--inverse .ds-input__end {
    color: var(--sys-text-inverse);
    opacity: 0.85;
}

/* Floating Bottom Bar - Apple Liquid Glass Style */
.floating-bottom-bar {
    position: fixed;
    bottom: 24px;
    left: 50%;
    transform: translateX(-50%);
    z-index: 100;
    pointer-events: none; /* Allow clicks to pass through the container */
    /* Match app-container structure exactly */
    max-width: 480px;
    width: 100%;
    padding: 0 20px; /* Same padding pattern as content sections */
}

.bottom-bar-content {
    display: flex;
    align-items: flex-end;
    justify-content: center;
    gap: 16px;
    width: 100%; /* Now constrained by floating-bottom-bar padding */
    min-height: 64px;
    pointer-events: auto; /* Re-enable clicks on the actual content */
}

.nav-items {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 0.5px solid rgba(255, 255, 255, 0.3);
    border-radius: 200px;
    padding: 10px 20px;
    height: 64px;
    box-shadow: 
        0 8px 32px rgba(0, 0, 0, 0.08),
        0 1px 0px rgba(255, 255, 255, 0.2) inset,
        0 -1px 0px rgba(0, 0, 0, 0.05) inset;
}

.nav-items .nav-item {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 44px;
    height: 44px;
    cursor: pointer;
    transition: all 0.2s cubic-bezier(0.2, 0.8, 0.2, 1);
    position: relative;
    margin: 0;
    padding: 0;
}

.nav-items .nav-item .nav-icon {
    width: 32px;
    height: 32px;
    transition: all 0.2s cubic-bezier(0.2, 0.8, 0.2, 1);
    filter: brightness(0) saturate(100%) invert(35%) sepia(15%) saturate(435%) hue-rotate(202deg) brightness(95%) contrast(90%);
}

/* Specific sizing for quizlet-plus-icon */
.nav-items .nav-item .nav-icon[src*="quizlet-plus-icon"] {
    width: 36px;
    height: 32px;
}

.nav-items .nav-item.active .nav-icon {
    filter: brightness(0) saturate(100%) invert(24%) sepia(93%) saturate(1745%) hue-rotate(232deg) brightness(102%) contrast(104%);
}


.nav-items .nav-item:active {
    transform: scale(0.95);
}

/* FAB Container */
.fab-container {
    display: flex;
    flex-direction: column;
    align-items: flex-end;
    gap: 16px;
    position: relative;
    width: 64px;
    overflow: visible;
}

/* FAB Menu */
.fab-menu {
    display: flex;
    flex-direction: column;
    align-items: flex-end; /* Align items to the right (near FAB) but let them size naturally */
    gap: 12px;
    opacity: 0;
    visibility: hidden;
    transform: translateY(10px) scale(0.95);
    transition: opacity 0.4s cubic-bezier(0.25, 0.8, 0.25, 1),
                visibility 0.4s cubic-bezier(0.25, 0.8, 0.25, 1),
                transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    pointer-events: none;
}

.fab-menu.show {
    opacity: 1;
    visibility: visible;
    transform: translateY(0) scale(1);
    pointer-events: auto;
}

/* FAB Menu Options - Primary Button Style */
.fab-menu-option {
    display: inline-flex; /* Changed to inline-flex to hug content */
    align-items: center;
    justify-content: center;
    gap: 8px;
    background: var(--sys-interactive-bg-primary-default);
    color: var(--sys-surface-base);
    border: none;
    border-radius: 200px;
    padding: 12px 24px; /* 12px top/bottom, 24px left/right */
    min-height: 48px; /* Ensure 48px tall */
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    white-space: nowrap;
    box-shadow: 
        0 4px 16px rgba(66, 85, 255, 0.2),
        0 1px 0px rgba(255, 255, 255, 0.15) inset;
    opacity: 0;
    transform: translateY(15px) scale(0.8);
    transition: opacity 0.4s cubic-bezier(0.25, 0.8, 0.25, 1),
                transform 0.4s cubic-bezier(0.25, 0.8, 0.25, 1),
                background-color 0.2s cubic-bezier(0.2, 0.8, 0.2, 1),
                box-shadow 0.2s cubic-bezier(0.2, 0.8, 0.2, 1);
}

/* Opening state - buttons become visible with staggered delays */
.fab-menu.show .fab-menu-option {
    opacity: 1;
    transform: translateY(0) scale(1);
}


/* Smooth closing with staggered transition delays */
.fab-menu-option:nth-child(1) {
    transition-delay: 0.1s; /* First button (top) closes last */
}

.fab-menu-option:nth-child(2) {
    transition-delay: 0.05s; /* Middle button closes second */
}

.fab-menu-option:nth-child(3) {
    transition-delay: 0s; /* Last button (bottom) closes first */
}

/* When opening, animate from bottom to top - bottom item appears first */
.fab-menu.show .fab-menu-option:nth-child(1) {
    transition-delay: 0.15s; /* First (top) opens last */
}

.fab-menu.show .fab-menu-option:nth-child(2) {
    transition-delay: 0.1s; /* Middle opens second */
}

.fab-menu.show .fab-menu-option:nth-child(3) {
    transition-delay: 0.05s; /* Last (bottom) opens first */
}

.fab-menu-option:hover {
    background: var(--sys-interactive-bg-primary-hover);
    transform: translateY(-2px);
    box-shadow: 
        0 6px 20px rgba(66, 85, 255, 0.25),
        0 1px 0px rgba(255, 255, 255, 0.15) inset;
}

.fab-menu-option:active {
    transform: translateY(-1px);
}

.fab-menu-icon {
    width: 24px;
    height: 24px;
}

/* FAB (Floating Action Button) */
.fab {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    background: var(--color-twilight-500);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    border: 0.5px solid rgba(255, 255, 255, 0.2);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    position: relative;
    overflow: hidden;
    flex-shrink: 0;
    box-shadow: 
        0 8px 32px rgba(66, 85, 255, 0.3),
        0 1px 0px rgba(255, 255, 255, 0.15) inset,
        0 -1px 0px rgba(0, 0, 0, 0.05) inset;
}

/* FAB Open State - Secondary Colors */
.fab.open {
    background: var(--sys-interactive-bg-secondary-default);
    box-shadow: 
        0 4px 16px rgba(168, 177, 255, 0.2),
        0 1px 0px rgba(255, 255, 255, 0.2) inset,
        0 -1px 0px rgba(0, 0, 0, 0.03) inset;
}

.fab::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.2) 0%, transparent 50%);
    border-radius: 50%;
    opacity: 1;
    transition: opacity 0.2s ease;
}

.fab:hover {
    transform: translateY(-2px) scale(1.05);
}

.fab:active {
    transform: translateY(-1px) scale(1.02);
}

.fab-icon {
    width: 24px;
    height: 24px;
    filter: brightness(0) saturate(100%) invert(100%);
    position: relative;
    z-index: 1;
    transition: width 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), 
                height 0.3s cubic-bezier(0.25, 0.8, 0.25, 1),
                filter 0s; /* Instant color change */
}

/* FAB Icon in Open State */
.fab.open .fab-icon {
    filter: brightness(0) saturate(100%) invert(24%) sepia(93%) saturate(1745%) hue-rotate(232deg) brightness(102%) contrast(104%);
}

/* Remove browser default focus outline */
.fab:focus {
    outline: none;
}

/* Remove browser default active/pressed state styling */
.fab:active {
    outline: none;
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* Optional: Add custom focus state for accessibility */
.fab:focus-visible {
    box-shadow: 
        0 8px 32px rgba(66, 85, 255, 0.3),
        0 1px 0px rgba(255, 255, 255, 0.15) inset,
        0 -1px 0px rgba(0, 0, 0, 0.05) inset,
        0 0 0 3px rgba(66, 85, 255, 0.3);
}